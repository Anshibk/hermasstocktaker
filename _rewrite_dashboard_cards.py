from pathlib import Path
path = Path("app/static/js/app.js")
text = path.read_text()
start = text.index("      ${groups.map(g=>{")
end = text.index("      }).join(\"\")}", start) + len("      }).join(\"\")}")
block = "      ${groups.map(g=>{\n        const s=stats[g]||{categories:0,items:0,counted:0,value:0};\n        const cardStats = {\n          categories: Number(s.categories) || 0,\n          items: Number(s.items) || 0,\n          counted: Number(s.counted) || 0,\n          value: (typeof s.value === 'number' && Number.isFinite(s.value)) ? Number(s.value) : null,\n        };\n        nextDashboardStats[g] = cardStats;\n        const valueDisplay = cardStats.value == null ? formatINR(null) : formatINR(cardStats.value);\n        return `\n    <div class=\"dashboard-card bg-white border border-slate-200 rounded-xl p-5 shadow-sm hover:-translate-y-1 hover:shadow-lg transition-all duration-200\" data-dashboard-card=\"${H(g)}\">\n      <div class=\"font-bold text-lg mb-4 text-cyan-800\">${H(g)}</div>\n      <div class=\"text-sm space-y-2\">\n        <div class=\"flex justify-between items-center\"><span class=\"font-medium text-slate-500\">Categories:</span> <span class=\"font-semibold dashboard-stat\" data-stat=\"categories\">${cardStats.categories}</span></div>\n        <div class=\"flex justify-between items-center\"><span class=\"font-medium text-slate-500\">Items:</span> <span class=\"font-semibold dashboard-stat\" data-stat=\"items\">${cardStats.items}</span></div>\n        <div class=\"flex justify-between items-center\"><span class=\"font-medium text-slate-500\">Counted:</span> <span class=\"font-semibold dashboard-stat\" data-stat=\"counted\">${cardStats.counted}</span></div>\n        <div class=\"flex justify-between items-center\"><span class=\"font-medium text-slate-500\">Total Value:</span> <span class=\"font-bold text-slate-700 dashboard-stat\" data-stat=\"value\">${valueDisplay}</span></div>\n      </div>\n    </div>`;\n      }).join(\"\")}")
text = text[:start] + block + text[end:]
path.write_text(text)
